"use strict";var ApplicationConfiguration=function(){var apiVersion="1_0_0",applicationModuleName="runningApp",applicationModuleVendorDependencies=["ngResource","ngAnimate","ui.router","ui.bootstrap","ui.utils"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)},config={applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule};return Object.defineProperty(config,"apiVersion",{value:apiVersion,configurable:!1,enumerable:!0,writable:!1}),Object.freeze(config),config}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("articles"),ApplicationConfiguration.registerModule("c3-charts",["runs"]),ApplicationConfiguration.registerModule("charts",["runs","customCore","mediator","data-selector"]),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("customCore",["mediator"]),ApplicationConfiguration.registerModule("dashboard",["ngResource","runs","ui.router","users","charts","mediator"]),ApplicationConfiguration.registerModule("data-selector"),ApplicationConfiguration.registerModule("mediator"),ApplicationConfiguration.registerModule("runs",["ngResource","ui.router","users","charts"]),ApplicationConfiguration.registerModule("left-nav",["customCore","mediator"]),ApplicationConfiguration.registerModule("top-nav"),ApplicationConfiguration.registerModule("upload-data",["angularFileUpload","ngResource","ui.router"]),ApplicationConfiguration.registerModule("users"),angular.module("articles").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Articles","articles","dropdown","/articles(/create)?"),Menus.addSubMenuItem("topbar","articles","List Articles","articles"),Menus.addSubMenuItem("topbar","articles","New Article","articles/create")}]),angular.module("articles").config(["$stateProvider",function($stateProvider){$stateProvider.state("listArticles",{url:"/articles",templateUrl:"modules/articles/views/list-articles.client.view.html"}).state("createArticle",{url:"/articles/create",templateUrl:"modules/articles/views/create-article.client.view.html"}).state("viewArticle",{url:"/articles/:articleId",templateUrl:"modules/articles/views/view-article.client.view.html"}).state("editArticle",{url:"/articles/:articleId/edit",templateUrl:"modules/articles/views/edit-article.client.view.html"})}]),angular.module("articles").controller("ArticlesController",["$scope","$stateParams","$location","Authentication","Articles",function($scope,$stateParams,$location,Authentication,Articles){$scope.authentication=Authentication,$scope.create=function(){var article=new Articles({title:this.title,content:this.content});article.$save(function(response){$location.path("articles/"+response._id),$scope.title="",$scope.content=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(article){if(article){article.$remove();for(var i in $scope.articles)$scope.articles[i]===article&&$scope.articles.splice(i,1)}else $scope.article.$remove(function(){$location.path("articles")})},$scope.update=function(){var article=$scope.article;article.$update(function(){$location.path("articles/"+article._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.articles=Articles.query()},$scope.findOne=function(){$scope.article=Articles.get({articleId:$stateParams.articleId})}}]),angular.module("articles").factory("Articles",["$resource",function($resource){return $resource("articles/:articleId",{articleId:"@_id"},{update:{method:"PUT"}})}]),angular.module("c3-charts").config(["$stateProvider",function($stateProvider){$stateProvider.state("c3-charts",{url:"/runs/charts/c3",resolve:{runsSummariesRes:["getSummaries","formatSummaries",function(getSummaries,formatSummaries){var queryOptions={limit:10},formattedSumms=getSummaries.get(queryOptions).then(function(d){return formatSummaries(d)});return formattedSumms}]},templateUrl:"modules/c3-charts/views/c3-line-chart.client.view.html",controller:"C3ChartsCtrl"})}]),function(d3,c3){var C3ChartsCtrl=function($scope,runsSummariesRes){$scope.runs=runsSummariesRes;var runs=[],allRuns=$scope.runs.runs;allRuns.forEach(function(run){var aRun=[];aRun.push(run.startTime),run.markers.forEach(function(marker){{var timeAsString=marker.time;d3.time.format("%M.%S")(new Date(timeAsString))}aRun.push(timeAsString)}),runs.push(aRun)});c3.generate({bindto:"#c3-chart",data:{columns:runs},grid:{x:{show:!0},y:{show:!0}},tooltip:{format:{value:function(value){var x;return x=d3.time.format("%M:%S")(new Date(value))}}},axis:{y:{show:!0,type:"timeseries",ticks:{time:{value:"seconds",interval:30}},tick:{format:d3.time.format("%Mm %Ss")}}}})};angular.module("c3-charts").controller("C3ChartsCtrl",["$scope","runsSummariesRes",C3ChartsCtrl])}(window.d3,window.c3),angular.module("charts").config(["$stateProvider",function($stateProvider){$stateProvider.state("charts",{url:"/runs/charts/custom",resolve:{getSummariesTenRes:["getSummaries","formatSummaries",function(getSummaries,formatSummaries){var queryOptions={limit:10},formattedSumms=getSummaries.get(queryOptions).then(function(d){return formatSummaries(d)});return formattedSumms}]},templateUrl:"modules/charts/views/charts.client.view.html",controller:"chartsCtrl"})}]),function(){var chartsCtrl=function($scope,getSummariesTenRes){$scope.runs=getSummariesTenRes};angular.module("charts").controller("chartsCtrl",["$scope","getSummariesTenRes",chartsCtrl])}(window._),function(){var chartDataSelector=function($window,$filter,addListItem,toggleData,setHeightAftrTopNav,mediator){return{restrict:"AE",replace:"true",template:'<div class="dataselector"></div>',link:function(scope,elem){var data=scope.runs.runs,d3=$window.d3,chartDataSelectorList=document.createElement("ul"),listItemSelectRun={parentListElement:chartDataSelectorList,anchorElement:{textContent:"Select your run"},classNm:"select-run"},listItemSelectAll={parentListElement:chartDataSelectorList,anchorElement:{textContent:"All runs"},classNm:"run-all inactive"};addListItem(listItemSelectRun),data.forEach(function(d,index){var startDate=d3.time.format("%a %b %e %Y")(new Date(d.startTime)),selectorListItem={parentListElement:chartDataSelectorList,anchorElement:{textContent:startDate},classNm:"run-"+index+" inactive"};addListItem(selectorListItem)}),addListItem(listItemSelectAll),elem.append(chartDataSelectorList),setHeightAftrTopNav(elem[0]),elem.on("click",toggleData);var resetHeight=function(){var element=elem[0];setHeightAftrTopNav(element)},resizeEvent=mediator.subscribe("windowResize",resetHeight,this);scope.$on("$destroy",function(){mediator.unsubscribe(resizeEvent)})}}};angular.module("charts").directive("chartDataSelector",["$window","$filter","addListItem","toggleData","setHeightAftrTopNav","mediator",chartDataSelector])}();var lineChartAltitude=function(createSingleLineChart,mediator){return{restrict:"A",replace:!0,template:'<div class="svgContainer"><svg id="chart--altitude" class="svgChart"></svg></div>',link:function(scope,elem){var run=scope.run,rawSvg=elem.find("svg")[0],chart=createSingleLineChart(run,elem[0],rawSvg),resizeEvent=mediator.subscribe("windowResize",chart.resizeChart,this);scope.$on("$destroy",function(){mediator.unsubscribe(resizeEvent)})}}};angular.module("charts").directive("lineChartAltitude",["createSingleLineChart","mediator",lineChartAltitude]),function(lodash){var lineChart=function($window,$filter,mediator,createChart){return{restrict:"AE",replace:!0,template:'<div class="svgContainer col-lg-11"><svg id="lChart" class="svgChart"></svg></div>',link:function(scope,elem){var runs=scope.runs,rawSvg=elem.find("svg"),chartHeight=360,chart=createChart(runs,elem[0],rawSvg,chartHeight),resizeEvent=mediator.subscribe("windowResize",chart.resizeChart,this);scope.$on("$destroy",function(){mediator.unsubscribe(resizeEvent)})}}};angular.module("charts").directive("lineChart",["$window","$filter","mediator","createChart",lineChart])}(window._),function(){var createSingleLineChart=function($window){return function(getRunRes,rawElem,rawSvg){function setData(coords){coords.forEach(function(coord,i){coord.map(function(d){var runData={},currentTime=new Date(d[3]),newTime=currentTime-startTime;runData.altitude=d[2],runData.time=newTime,data.push(runData)})})}var chartContainerHeight,getChartContainerWidth,setChartContainerWidth,getChartWidth,resizeChart,d3=$window.d3,run=getRunRes,margin={top:20,right:20,bottom:20,left:20},chartHeight=368,yAxisHeight=chartHeight-margin.top-margin.bottom,chartContainerWidth=0;setChartContainerWidth=function(wrapper){chartContainerWidth=parseInt(wrapper.offsetWidth)},getChartContainerWidth=function(){return 0===chartContainerWidth&&setChartContainerWidth(rawElem),chartContainerWidth},getChartWidth=function(){var containerWidth=getChartContainerWidth();return containerWidth-margin.left-margin.right},setChartContainerWidth(rawElem);var x=d3.time.scale().range([0,getChartWidth()]),y=d3.scale.linear().range([yAxisHeight,0]),xAxis=d3.svg.axis().scale(x).orient("bottom").ticks(d3.time.minute,2).tickFormat(d3.time.format("%M")),yAxis=d3.svg.axis().scale(y).orient("left"),line=d3.svg.line().x(function(d){return x(d.time)}).y(function(d){return y(d.altitude)});chartContainerHeight=chartHeight+margin.top+margin.bottom;var svg=d3.select(rawSvg).attr("width",getChartContainerWidth()).attr("height",chartContainerHeight),svgAxis=svg.append("g").attr("transform","translate("+margin.left+","+margin.top+")"),startTime=new Date(run[0][0][3]),data=[];return setData(run),x.domain(d3.extent(data,function(d){return d.time})),y.domain(d3.extent(data,function(d){return d.altitude})),svgAxis.append("g").attr("class","xAxis axis").attr("transform","translate(0,"+yAxisHeight+")").call(xAxis).append("text").attr("y",20).attr("x",getChartWidth()/2).attr("dy","1em").style("text-anchor","end").text("Time (mins)"),svgAxis.append("g").attr("class","yAxis axis").call(yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Altitude"),svgAxis.append("path").datum(data).attr("class","line").attr("d",line).attr("stroke","blue").attr("stroke-width",2).attr("fill","none"),resizeChart=function(){setChartContainerWidth(rawElem),svg.attr("width",getChartContainerWidth()),x.range([0,getChartWidth()]);var xAxisGen=svg.select(".xAxis");xAxisGen.call(xAxis);var runPath=svg.select(".line");runPath.attr({d:line(data)})},{resizeChart:resizeChart}}};angular.module("charts").service("createSingleLineChart",["$window",createSingleLineChart])}();var createChart=function($window){return function(runs,rawElem,rawSvg,chartHeight){function setChartParameters(){chartContainerHeight=chart.axis.y.height+2*margin,svg.attr("height",chartContainerHeight),svg.attr("width",getChartContainerWidth()),xScale=chart.xScale.type.domain(chart.xScale.domain).range(chart.xScale.range),yScale=chart.yScale.type.domain(chart.yScale.domain).range(chart.yScale.range),xAxisGen=d3.svg.axis().scale(xScale).orient(chart.axis.x.orient).tickSize(-chart.axis.y.height,0,0).ticks(chart.axis.x.ticks.count),yAxisGen=d3.svg.axis().scale(yScale).orient("left").tickSize(-chart.axis.x.width.get(),0,0).ticks(chart.axis.x.ticks.type[chart.axis.x.ticks.interval.measure],chart.axis.x.ticks.interval.lapse).tickFormat(chart.axis.x.ticks.type.format(chart.axis.x.ticks.format)),lineFun=d3.svg.line().x(function(d){return xScale(d.km)}).y(function(d){return yScale(d.time)}).interpolate("linear")}function drawAxis(){svg.append("svg:g").attr("class","xAxis axis grid").attr("transform","translate(0,"+chart.axis.y.height+")").call(xAxisGen).append("text").attr("class","xAxis__label").attr("y",20).attr("x",getChartWidth()/2).attr("dy","1em").style("text-anchor","end").text("Distance (km)"),svg.append("svg:g").attr("class","yAxis axis grid").attr("transform","translate(50, 0)").call(yAxisGen).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Time")}function redrawAxis(){var x=svg.select(".xAxis");x.call(xAxisGen).select(".xAxis__label").attr("y",20).attr("x",getChartWidth()/2).attr("dy","1em").style("text-anchor","end").text("Distance (km)"),yAxisGen=d3.svg.axis().scale(yScale).orient("left").tickSize(-chart.axis.x.width.get(),0,0).ticks(d3.time.seconds,30).tickFormat(d3.time.format("%Mm %Ss"));var y=svg.select(".yAxis");y.call(yAxisGen)}function redrawPaths(){data.forEach(function(d,index){var runPath=svg.select("path.path"+index);runPath.attr({d:lineFun(d.markers)});var runGroup=svg.select("g.run-"+index),circle=runGroup.selectAll("circle");circle.attr("r",chart.scatterplot.circles.radius).attr("cx",function(d){return xScale(d.km)}).attr("cy",function(d){return yScale(d.time)})})}var xScale,yScale,xAxisGen,yAxisGen,lineFun,drawPaths,resizeChart,init,chartContainerHeight,getChartContainerWidth,setChartContainerWidth,getChartWidth,d3=$window.d3,data=runs.runs,markerCount=d3.max(runs.markerSize),longestMarkerTime=runs.longestMarkerTime,shortestMarkerTime=runs.shortestMarkerTime,getLowestYAxis=function(){var lowestYAxisPoint;return lowestYAxisPoint=0!==shortestMarkerTime?shortestMarkerTime/1.1:0},margin=30,lineColors=["#B65020","#000","#ec6b60","#563D7C","#F4FD1F","#EE5FF1","#F28483","#6AF0D4","#2C4F53","#3A4F56"],yAxisHeight=chartHeight-2*margin,svg=d3.select(rawSvg[0]),runGroup=[],pathClass="path",chartContainerWidth=0,chartContainerPadding=30;setChartContainerWidth=function(wrapper){chartContainerWidth=parseInt(wrapper.offsetWidth)-chartContainerPadding},getChartContainerWidth=function(){return 0===chartContainerWidth&&setChartContainerWidth(rawElem),chartContainerWidth},getChartWidth=function(){var containerWidth=getChartContainerWidth();return containerWidth-2*margin},setChartContainerWidth(rawElem);var chart={margin:20,axis:{y:{height:yAxisHeight,lowest:getLowestYAxis()},x:{width:{get:getChartWidth},ticks:{count:markerCount,type:d3.time,interval:{measure:"seconds",lapse:30},format:"%M:%S"},orient:"bottom"}},xScale:{type:d3.scale.linear(),domain:[1,markerCount],range:[50,getChartWidth()]},yScale:{type:d3.time.scale(),domain:[getLowestYAxis(),longestMarkerTime],range:[yAxisHeight,0]},scatterplot:{circles:{radius:3}}};return init=function(){setChartParameters(),drawAxis()}(),resizeChart=function(){setChartContainerWidth(rawElem),svg.attr("width",getChartContainerWidth()),xScale.range([50,chart.axis.x.width.get()]),redrawAxis(),redrawPaths()},drawPaths=function(data){data.forEach(function(d,index){runGroup[index]=svg.append("g"),runGroup[index].attr("class","runLine vis-hidden run-"+index),runGroup[index].append("svg:path").attr({d:lineFun(d.markers),stroke:lineColors[index],"stroke-width":2,fill:"none","class":pathClass+" path"+index}),runGroup[index].selectAll("dot").data(d.markers).enter().append("circle").attr("r",chart.scatterplot.circles.radius).attr("cx",function(d){return xScale(d.km)}).attr("cy",function(d){return yScale(d.time)})})}(data),{svg:svg,resizeChart:resizeChart}}};angular.module("charts").service("createChart",["$window",createChart]),function(){var toggleData=function(){var allRunsSelect=!1;return function(event){function toggleVis(chartRun){var el=angular.element(chartRun);el.toggleClass("vis-hidden")}function toggleAllRuns(){function toggleGraphRuns(){var allRunsArray=function(){for(var result=[],i=0;i<allRunsNodeList.length;i++)result[i]=allRunsNodeList[i];return result}();allRunsArray.forEach(function(run){var aRun=angular.element(run);toggleAClass(aRun,"vis-hidden")})}function toggleAllSelectorItems(){var selectorListItems=document.querySelectorAll(".dataselector-list li"),allSelectorsArray=function(){for(var result=[],i=0;i<selectorListItems.length;i++)result[i]=selectorListItems[i];return result}();allSelectorsArray.forEach(function(listItem){var aListItem=angular.element(listItem);toggleAClass(aListItem,"inactive")})}var toggleAClass,allRunsNodeList=document.querySelectorAll(".runLine");allRunsSelect=!allRunsSelect,toggleAClass=allRunsSelect===!1?function(element,classNm){element.addClass(classNm)}:function(element,classNm){element.removeClass(classNm)},toggleGraphRuns(),toggleAllSelectorItems()}var e=event,el=angular.element(e.target.parentNode),runNum=el.attr("class").split(" ")[0];if("run-all"===runNum)toggleAllRuns();else{el.toggleClass("inactive");var runClass="g."+runNum,chartRun=document.querySelector(runClass);toggleVis(chartRun)}}};angular.module("charts").factory("toggleData",[toggleData])}(),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/",templateUrl:"modules/core/views/home.client.view.html"})}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("core").controller("HomeController",["$scope","Authentication",function($scope,Authentication){$scope.authentication=Authentication}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]);var mainContent=function(mediator,setHeightAftrTopNav){return{restrict:"C",link:function(scope,elem){setHeightAftrTopNav(elem[0]),scope.resetHeight=function(){setHeightAftrTopNav(elem[0])};var resizeEvent=mediator.subscribe("windowResize",scope.resetHeight,this);scope.$on("$destroy",function(){mediator.unsubscribe(resizeEvent)})}}};angular.module("customCore").directive("mainContent",["mediator","setHeightAftrTopNav",mainContent]),function(){var setHeightAftrTopNav=function(){return function(elem){function setElHeight(elem){htmlEl=document.querySelector("html"),topNav=document.getElementById("top-nav-js")||"";var htmlHeight=htmlEl.clientHeight,topNavHeight=""===topNav?50:topNav.clientHeight,elNewHeight=htmlHeight-topNavHeight;elem.style.height=elNewHeight+"px"}var htmlEl,topNav;setElHeight(elem)}};angular.module("customCore").factory("setHeightAftrTopNav",[setHeightAftrTopNav])}(),function(){var config=function($stateProvider){$stateProvider.state("dashboard",{url:"/dashboard",resolve:{getSummariesOneRes:["getSummaries",function(getSummaries){return getSummaries.get()}],getRunRes:["getRuns",function(getRuns){return getRuns.get()}],getSummariesFormattedOneRes:["getSummaries","formatSummaries",function(getSummaries,formatSummaries){var queryOptions={limit:1},formattedSumms=getSummaries.get(queryOptions).then(function(d){return formatSummaries(d)});return formattedSumms}]},views:{"":{templateUrl:"modules/dashboard/views/dashboard.client.view.html"},"chartLine@dashboard":{templateUrl:"modules/dashboard/views/dashboard-chart-line.client.view.html",controller:"DashboardChartlineCtrl"},"summary@dashboard":{templateUrl:"modules/runs/views/run-table.client.view.html",controller:"DashboardSummCtrl"}}})};angular.module("dashboard").config(["$stateProvider",config])}(),function(){function DashboardChartlineCtrl($scope,getRunRes){$scope.run=getRunRes[0].features[0].geometry.coordinates}angular.module("dashboard").controller("DashboardChartlineCtrl",["$scope","getRunRes",DashboardChartlineCtrl])}(),function(){function DashboardSummCtrl($scope,getSummariesFormattedOneRes){$scope.tableSortable=!1,$scope.runs=getSummariesFormattedOneRes}angular.module("dashboard").controller("DashboardSummCtrl",["$scope","getSummariesFormattedOneRes",DashboardSummCtrl])}(),function(){var addListItem=function(){return function(options){var anchor,li=document.createElement("li"),listItem={anchorElement:null,textContent:null,className:null,parentListElement:null,attributes:null};options&&(listItem.anchorElement=options.anchorElement?options.anchorElement:null,listItem.textContent=options.textContent?options.textContent:null,listItem.classNm=options.classNm?options.classNm:null,listItem.parentListElement=options.parentListElement?options.parentListElement:null,listItem.attributes=options.attributes?options.attributes:null),listItem.anchorElement&&(anchor=document.createElement("a"),listItem.anchorElement.textContent?anchor.textContent=listItem.anchorElement.textContent:"",li.appendChild(anchor)),listItem.classNm&&(li.className=listItem.classNm),listItem.attributes&&listItem.attributes.forEach(function(attr){li.setAttribute(attr.name,attr.value)}),listItem.parentListElement.appendChild(li)}};angular.module("data-selector").factory("addListItem",[addListItem])}(),function(lodash){var _=lodash,mediator=function(){function guidGenerator(){var S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()}var topics={},topicPrototype={subscribers:[]},topicFactory=function(newTopic){return angular.extend(topicPrototype,newTopic)},addTopic=function(name,options){if(!(topics[name]instanceof Object)){var aTopic=topicFactory(options);topics[name]=aTopic}},eventTopics=[].slice.call(arguments,0);!function(){eventTopics.forEach(function(topic){addTopic(topic.name,topic)})}();var addSubToTopic=function(topic,sub){var activeListener;if(topics[topic]instanceof Object){topics[topic].subscribers.push(sub);var addListener=function(fn,context){var callback=function(){fn.call(context)},listener=topics[topic].addListener(callback);return listener};activeListener=addListener(sub.fn,sub.context)}else console.log("NO TOPIC OF THAT DESCRIPTION");return activeListener},rmSubFromTopic=function(atopic,guid){var topic=topics[atopic],ind=_.findIndex(topic.subscribers,{guid:guid});topic.subscribers.splice(ind,1)},subscribe=function(topic,fn,context){var Subscriber=function(topic,fn,context){this.guid=guidGenerator(),this.topic=topic,this.fn=fn,this.context=context},sub=new Subscriber(topic,fn,context);return sub.activeListener=addSubToTopic(sub.topic,sub),sub},getSubscribers=function(topic){var subs=[];return topics[topic]instanceof Object&&(subs=topics[topic].subscribers),subs},unsubscribe=function(sub){if(topics[sub.topic]instanceof Object){var topic=topics[sub.topic];topic.removeListener(sub.activeListener),rmSubFromTopic(sub.topic,sub.guid)}else console.log("event / topic does not exist")},actions={subscribe:subscribe,unsubscribe:unsubscribe,getSubscribers:getSubscribers};return actions};angular.module("mediator").service("mediator",["windowResize",mediator])}(window._),function(lodash){var _=lodash,windowResize=function(){var registerTopic={name:"windowResize",addListener:function(callback){var action=function(callback){return _.debounce(callback,150)}(callback);return window.addEventListener("resize",action),action},removeListener:function(action){window.removeEventListener("resize",action)}};return registerTopic};angular.module("mediator").service("windowResize",[windowResize])}(window._),angular.module("runs").config(["$stateProvider",function($stateProvider){$stateProvider.state("tableRuns",{url:"/runs/table",resolve:{getSummariesTenRes:["getSummaries","formatSummaries",function(getSummaries,formatSummaries){var queryOptions={limit:10},formattedSumms=getSummaries.get(queryOptions).then(function(d){return formatSummaries(d)});return formattedSumms}]},templateUrl:"modules/runs/views/run-table.client.view.html",controller:"TableRunsCtrl"}).state("mapRuns",{url:"/runs/map",resolve:{getRunRes:["getRuns",function(getRuns){return getRuns.get()}],getSummariesFiveRes:["getSummaries",function(getSummaries){var queryOptions={limit:5};return getSummaries.get(queryOptions)}]},views:{"":{templateUrl:"modules/runs/views/run.client.view.html"},"columnOne@mapRuns":{templateUrl:"modules/runs/views/run-map-summary.client.view.html",controller:"MapSummaryCtrl"}}})}]),function(){function MapSummaryCtrl($scope,getSummariesFiveRes,dateFilter){function setLatestSummaries(latestSumms){latestSumms.forEach(function(summary,index){var summ={listOrder:index,activityId:summary.runId,date:dateFilter(summary.startTime,"MMM d, y h:mm a"),totalTime:dateFilter(summary.totalTime,"H:m:s"),totalDistanceKm:summary.totalDistanceKm.toFixed(2)};$scope.summaries.push(summ)})}$scope.summs=getSummariesFiveRes;var latestFive=getSummariesFiveRes;$scope.summaries=[],$scope.setLatestSummaries=setLatestSummaries,$scope.setLatestSummaries(latestFive)}angular.module("runs").controller("MapSummaryCtrl",["$scope","getSummariesFiveRes","dateFilter",MapSummaryCtrl])}(),function(){function TableRunsCtrl(getSummariesTenRes,$scope){$scope.runs=getSummariesTenRes}angular.module("runs").controller("TableRunsCtrl",["getSummariesTenRes","$scope",TableRunsCtrl])}(),function(){var mapDataSelector=function($window,$rootScope,dateFilter,addListItem,setHeightAftrTopNav,mediator){return{restrict:"AE",replace:"true",template:'<div class="dataselector hidden-lg"></div>',link:function(scope,elem){var prevTargetEl,data=scope.summs,dataSelectorList=document.createElement("ul"),listItemSelectRun={parentListElement:dataSelectorList,anchorElement:{textContent:"Select a run"},classNm:"select-run"};addListItem(listItemSelectRun),data.forEach(function(d,index){var inactiveClass=0===index?"":"inactive",selectorListItem={parentListElement:dataSelectorList,anchorElement:{textContent:dateFilter(d.startTime,"medium")},classNm:inactiveClass,attributes:[{name:"data-activity-id",value:d.runId},{name:"data-list-order",value:index}]};addListItem(selectorListItem)}),elem.append(dataSelectorList),elem.on("click",function(e){function toggleVals(targetEl){"li"!==targetEl.nodeName.toLowerCase()?toggleVals(targetEl.parentNode):(activityId=targetEl.getAttribute("data-activity-id")||"",listOrder=targetEl.getAttribute("data-list-order"),targetEl.classList.toggle("inactive"),prevTargetEl||(prevTargetEl=elem.find("li")[1]),prevTargetEl.classList.toggle("inactive"),prevTargetEl=targetEl)}var targetEl=e.target,activityId="",listOrder=0;toggleVals(targetEl),$rootScope.$broadcast("summarySelected",{activityId:activityId,listOrder:listOrder})}),setHeightAftrTopNav(elem[0]);var resetHeight=function(){var element=elem[0];setHeightAftrTopNav(element)},resizeEvent=mediator.subscribe("windowResize",resetHeight,this);scope.$on("$destroy",function(){mediator.unsubscribe(resizeEvent)})}}};angular.module("runs").directive("mapDataSelector",["$window","$rootScope","dateFilter","addListItem","setHeightAftrTopNav","mediator",mapDataSelector])}(),function(lodash,sorttable){var _=lodash,runsSummaryTable=function($filter){return{restrict:"AE",link:function(scope,element){function createTableOfRuns(runs,sortable){function getMarkerSize(runs,headings){var markerSize=_.max(runs.markerSize);headings.markers=markerSize}function createTableHeadings(headings,headingRow){for(var heading in headings)if(headings.hasOwnProperty(heading)){var container=document.createDocumentFragment();if("markers"===heading)for(var markerSize=headings[heading],i=1;markerSize>=i;i++){var thd=document.createElement("th"),km=document.createTextNode("km "+i);thd.appendChild(km),container.appendChild(thd)}else{var thd2=document.createElement("th");thd2.appendChild(document.createTextNode(headings[heading])),container.appendChild(thd2)}headingRow.appendChild(container)}return headingRow}function createTableData(runs,markersSize,$filter){var markerSize=markersSize,container=document.createElement("tbody");return runs.runs.forEach(function(run){var tr=document.createElement("tr"),tdStartTime=document.createElement("td"),sTime=$filter("date")(run.startTime,"EEE MMM d, y h:mma");tdStartTime.appendChild(document.createTextNode(sTime));var attTime=$filter("date")(run.startTime,"yyyyMMddHHmm");tdStartTime.setAttribute("sorttable_customkey",attTime),tr.appendChild(tdStartTime);for(var i=0;markerSize>i;i++){var markerTime,data,td=document.createElement("td");run.markers[i]?(markerTime=run.markers[i].time,data=$filter("date")(markerTime,"m:ss")):data="",td.appendChild(document.createTextNode(data)),tr.appendChild(td)}var tdTotalDist=document.createElement("td"),dist=run.totalDistance.toFixed(2);tdTotalDist.appendChild(document.createTextNode(dist)),tr.appendChild(tdTotalDist);var tdTotalTime=document.createElement("td"),time=$filter("date")(run.totalTime,"HH:mm:ss");tdTotalTime.appendChild(document.createTextNode(time)),tr.appendChild(tdTotalTime),container.appendChild(tr)}),container}var table=document.createElement("table");table.className=sortable?"table table-responsive sortable":"table table-responsive";var headingRow,tableHeadings,tableData,markerSize,thead=document.createElement("thead"),headings={date:"Date",markers:0,totalDistance:"Distance",totalTime:"Time"};return getMarkerSize(runs,headings),markerSize=headings.markers,headingRow=document.createElement("tr"),tableHeadings=createTableHeadings(headings,headingRow),thead.appendChild(headingRow),table.appendChild(thead),tableData=createTableData(runs,markerSize,$filter),table.appendChild(tableData),table
}var runs=scope.runs,sortable=void 0!==scope.tableSortable?scope.tableSortable:!0,runsSorted=_.sortBy(runs.runs,"startTime").reverse();runs.runs=runsSorted;var tableOfRuns=(document.createDocumentFragment(),createTableOfRuns(runs,sortable));element.append(tableOfRuns);var table=document.querySelector("table.sortable")||"";""!==table&&sorttable.makeSortable(table)}}};angular.module("runs").directive("runsSummaryTable",["$filter",runsSummaryTable])}(window._,window.sorttable),function(){var formatSummaries=function($q){return function(runs){var deferred=$q.defer(),runsData={runs:[],markerSize:[],longestMarkerTime:0,shortestMarkerTime:0};return runs.forEach(function(run){var markersLen,runData={};runData.markers=[],markersLen=run.markerItems.length,runsData.markerSize.push(markersLen),runData.startTime=run.startTime,run.markerItems.forEach(function(marker){0===runsData.shortestMarkerTime?runsData.shortestMarkerTime=marker.totalTime:marker.totalTime<runsData.shortestMarkerTime&&(runsData.shortestMarkerTime=marker.totalTime),marker.totalTime>runsData.longestMarkerTime&&(runsData.longestMarkerTime=marker.totalTime);var markerData={km:marker.km,time:marker.totalTime};runData.markers.push(markerData)}),runData.totalDistance=run.totalDistanceKm,runData.totalTime=run.totalTime,runsData.runs.push(runData)}),deferred.resolve(runsData),deferred.promise}};angular.module("runs").factory("formatSummaries",["$q",formatSummaries])}(),function(){var getRunById=function($resource,Authentication){var runs={resource:$resource("/api/v_"+ApplicationConfiguration.apiVersion+"/:user_id/run/data/:run_id",{user_id:"@user_id",run_id:"@run_id"},{query:{method:"GET",isArray:!0},create:{method:"POST"}}),get:function(id){var promise=this.resource.query({user_id:Authentication.user._id,run_id:id}).$promise;return promise}};return runs};angular.module("runs").factory("getRunById",["$resource","Authentication",getRunById])}(),function(){var getRuns=function($resource,Authentication){var run={resource:$resource("/api/v_"+ApplicationConfiguration.apiVersion+"/:user_id/run/data",{user_id:"@user_id"}),get:function(options){var query={limit:1,offset:0};options&&(query={limit:options.limit?options.limit:1,offset:options.offset?options.offset:0});var promise=this.resource.query({user_id:Authentication.user._id,limit:query.limit,offset:query.offset}).$promise;return promise},data:null};return run};angular.module("runs").service("getRuns",["$resource","Authentication","formatSummaries",getRuns])}(),function(){var getSummariesById=function($resource,Authentication){var runs={resource:$resource("/api/v_"+ApplicationConfiguration.apiVersion+"/:user_id/run/summaries/:summary_id",{user_id:"@user_id",summary_id:"@summary_id"},{query:{method:"GET",isArray:!0},create:{method:"POST"}}),get:function(id){var promise=this.resource.query({user_id:Authentication.user._id,summary_id:id}).$promise;return promise}};return runs};angular.module("runs").factory("getSummariesById",["$resource","Authentication",getSummariesById])}(),function(){var getSummaries=function($resource,Authentication){var summary={resource:$resource("/api/v_"+ApplicationConfiguration.apiVersion+"/:user_id/run/summaries",{user_id:"@user_id"}),get:function(options){var query={limit:1,offset:0};options&&(query={limit:options.limit?options.limit:1,offset:options.offset?options.offset:0});var promise=this.resource.query({user_id:Authentication.user._id,limit:query.limit,offset:query.offset}).$promise;return promise},data:null};return summary};angular.module("runs").service("getSummaries",["$resource","Authentication",getSummaries])}(),function(){var SideNavGroupController=function($scope){$scope.hasIcon=angular.isDefined($scope.icon),$scope.hasSubMenu=angular.isDefined($scope.hasChildren)};angular.module("left-nav").controller("SideNavGroupController",["$scope",SideNavGroupController])}(),function(){var SideNavItemController=function($scope){$scope.hasIcon=angular.isDefined($scope.icon)};angular.module("left-nav").controller("SideNavItemController",["$scope",SideNavItemController])}(),function(lodash){var SideNavController=function($scope,Authentication){$scope.authentication=Authentication};angular.module("left-nav").controller("SideNavController",["$scope","Authentication",SideNavController])}(window._),function(){var sideNavGroup=function(){return{restrict:"AE",replace:!0,transclude:!0,controller:"SideNavGroupController",scope:{title:"@",icon:"@",iconCaption:"@",active:"=?",hasChildren:"=?",hasChildrenIcon:"@"},link:function(scope,element){var anchor=element.children()[0],angAnchor=angular.element(anchor);angAnchor.on("click",function(){element.toggleClass("open")})},template:'<li data-ng-class="{ active : active, hasChildren : hasChildren }"><a href=""><span data-ng-if="hasIcon" class="icon {{ icon }}"><em data-ng-if="hasIconCaption"> {{ iconCaption }} </em></span><span class="navTitle">{{ title }}</span><span class="icon toggleIcon {{ hasChildrenIcon }}"></span></a><ul data-ng-transclude=""></ul></li>'}};angular.module("left-nav").directive("sideNavGroup",sideNavGroup)}(),function(){var sideNavItem=function(){return{require:["^sideNav"],restrict:"AE",replace:!0,transclude:!0,controller:"SideNavItemController",scope:{title:"@",view:"@",icon:"@",iconCaption:"@",href:"@",target:"@"},link:function(scope,element,attrs,parentCtrls){parentCtrls[0],parentCtrls[1]},template:'<li><a ui-sref="{{ view }}" title="{{ title }}"><span data-ng-if="hasIcon" class="icon {{ icon }}"><em data-ng-if="hasIconCaption"> {{ iconCaption }}</em></span><span class="navTitle">{{ title }}</span><span data-ng-transclude=""></span></a></li>'}};angular.module("left-nav").directive("sideNavItem",sideNavItem)}(),function(){var sideNav=function($location,setHeightAftrTopNav,mediator){return{restrict:"AE",transclude:!0,replace:!0,template:'<nav><ul data-ng-transclude=""></ul></nav>',controller:"SideNavController",compile:function(){return{post:function(scope,iElement){var mediaQuery=window.matchMedia("(max-width: 768px)"),bod=document.querySelector("body");scope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState){if(""!==fromState.name&&document.querySelector(".left-nav li.active")){var prevEl=document.querySelector(".left-nav li.active");prevEl.classList.remove("active")}if(document.querySelector('#left-nav-js [ui-sref="'+toState.name+'"]')){var newEl=document.querySelector('#left-nav-js [ui-sref="'+toState.name+'"]').parentNode;newEl.classList.add("active")}mediaQuery.matches&&bod.classList.toggle("leftNav--toggle")}),setHeightAftrTopNav(iElement[0].parentElement),scope.resetHeight=function(){var element=iElement[0].parentElement;setHeightAftrTopNav(element)};var resizeEvent=mediator.subscribe("windowResize",scope.resetHeight,this);scope.$on("$destroy",function(){mediator.unsubscribe(resizeEvent)})}}}}};angular.module("left-nav").directive("sideNav",["$location","setHeightAftrTopNav","mediator",sideNav])}(),function(){var topNavToggleChartData=function(){return{restrict:"A",link:function(scope,element){function toggleMenu(event){chartList=document.querySelector("#dataselector-list-js"),event.preventDefault(),chartList.classList.toggle("inactive"),element.toggleClass("open")}var chartList,dataSelector=element.attr("data-data-selector"),click=element.on("click",toggleMenu),bod=document.querySelector("body"),toggleDataSelector=function(dataSelectorId){var dataSelector=dataSelectorId;return function(event){event.preventDefault(),bod.classList.toggle("dataselector-list-"+dataSelector+"--open")}}(dataSelector);element.on("click",toggleDataSelector),scope.$on("$destroy",function(){click(),chartList=null})}}};angular.module("top-nav").directive("topNavToggleChartData",[topNavToggleChartData])}(),function(){var topNavMenuIcon=function(){return{restrict:"A",link:function(scope,el){function toggleMenu(event){event.preventDefault(),bod.classList.toggle("leftNav--toggle")}var bod=document.querySelector("body");el.on("click",toggleMenu)}}};angular.module("top-nav").directive("topNavMenuIcon",[topNavMenuIcon])}(),angular.module("upload-data").config(["$provide",function($provide){$provide.decorator("$upload",function($delegate){return $delegate.checkSuffix=function(suffix,name){var testSuffix=new RegExp("."+suffix);return testSuffix.test(name.slice(-4))},$delegate})}]),angular.module("upload-data").config(["$stateProvider",function($stateProvider){$stateProvider.state("upload",{url:"/upload/gpx",templateUrl:"modules/upload-data/views/upload-data.client.view.html",controller:"UploadDataCtrl"})}]),function(){var UploadDataCtrl=function($scope,upload){$scope.message=upload.resultsListItems,$scope.fileName="Choose file",$scope.onFileSelect=function($files){for(var i=0;i<$files.length;i++){var file=$files[i];upload.uploadFile(file)}}};angular.module("upload-data").controller("UploadDataCtrl",["$scope","upload",UploadDataCtrl])}(),function(){var uploadResults=function($compile){return{restrict:"A",link:function(scope,element){function compileMe(toBeCompiled){return $compile(toBeCompiled)(scope)}scope.$watchCollection("message",function(){var num=scope.message.length-1,newEl=compileMe(scope.message[num]);element.prepend(newEl)})}}};angular.module("upload-data").directive("uploadResults",["$compile",uploadResults])}(),function(){var uploadData=function($upload,$rootScope){var uploadSuccess,uploadProgress,upload,uploadDefineVars,uploadFile,resultsListItems=[];return uploadDefineVars=function(){window.Worker instanceof Function?(uploadSuccess=function(message){resultsListItems.push("<li>Successfully uploaded: "+message.data+"</li>"),$rootScope.$apply()},upload=function(file){var worker=new Worker("/lib/custom/angular-file-upload-extra/web-worker.js");worker.postMessage(file),worker.onmessage=uploadSuccess}):(uploadSuccess=function(data,status,headers,config){resultsListItems.push('<li">Successfully uploaded: '+config.file.name+"</li>")},uploadProgress=function(evt){console.log("percent: "+parseInt(100*evt.loaded/evt.total))},upload=function(file){$upload.upload({url:"/upload",method:"POST",file:file}).progress(uploadProgress).success(uploadSuccess)})},uploadDefineVars(),uploadFile=function(file){var isitGpx=$upload.checkSuffix("gpx",file.name);return isitGpx===!1?resultsListItems.push('<li class="upload-file__message--fail">The file needs to be a gpx : '+file.name+"</li>"):void upload(file)},{resultsListItems:resultsListItems,uploadFile:uploadFile}};angular.module("upload-data").service("upload",["$upload","$rootScope",uploadData])}(),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("signout",{url:"/auth/one/signout",controller:function($http,$state,$location){$http.get("auth/signout").then(function(){$location.url("/"),window.location.reload()})}}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invlaid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http.delete("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]);